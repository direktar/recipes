<!-- app/views/devise/registrations/edit.html.erb -->
<main class="mx-auto flex min-h-screen w-full items-center justify-center bg-gray-900 text-white">
  <section class="flex w-[34rem] flex-col space-y-10">

    <h2 class="text-center text-4xl font-medium">
      Edit <%= resource_name.to_s.humanize %>
    </h2>

    <%= form_for(resource,
                 as: resource_name,
                 url: registration_path(resource_name),
                 html: { method: :put, class: "flex flex-col space-y-8" }) do |f| %>

      <!-- Email -->
      <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
        <%= f.email_field :email,
                          autofocus: true,
                          autocomplete: "email",
                          placeholder: "Email",
                          class: "w-full border-none bg-transparent outline-none placeholder:italic focus:outline-none" %>
      </div>

      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
        <p class="text-sm text-yellow-400">
          Currently waiting confirmation for: <%= resource.unconfirmed_email %>
        </p>
      <% end %>

      <!-- New password -->
      <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
        <label class="mb-1 block text-sm text-gray-400">
          New password <i>(leave blank to keep current)</i>
          <% if @minimum_password_length %>
            – <%= @minimum_password_length %>+ chars
          <% end %>
        </label>
        <%= f.password_field :password,
                             autocomplete: "new-password",
                             placeholder: "New password",
                             class: "w-full border-none bg-transparent outline-none placeholder:italic focus:outline-none" %>
      </div>

      <!-- Password confirmation -->
      <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
        <%= f.password_field :password_confirmation,
                             autocomplete: "new-password",
                             placeholder: "Confirm new password",
                             class: "w-full border-none bg-transparent outline-none placeholder:italic focus:outline-none" %>
      </div>

      <!-- Current password -->
      <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
        <label class="mb-1 block text-sm text-gray-400">
          Current password <i>(needed to confirm changes)</i>
        </label>
        <%= f.password_field :current_password,
                             autocomplete: "current-password",
                             placeholder: "Current password",
                             class: "w-full border-none bg-transparent outline-none placeholder:italic focus:outline-none" %>
      </div>

      <!-- Error messages -->
      <%= render "devise/shared/error_messages", resource: resource %>

      <!-- Submit -->
      <%= f.submit "UPDATE",
                   class: "transform rounded-sm bg-indigo-600 py-2 font-bold duration-300 hover:bg-indigo-400" %>

    <% end %>

    <!-- Cancel account -->
    <div class="space-y-4 text-center">
      <h3 class="text-lg font-semibold">Cancel my account</h3>
      <p class="text-sm text-gray-400">Unhappy?</p>
      <%= button_to "Delete account",
                    registration_path(resource_name),
                    method: :delete,
                    data: { turbo_confirm: "Are you sure?" },
                    class: "rounded border border-red-600 px-4 py-1 font-medium text-red-500 transition hover:bg-red-600 hover:text-white" %>
    </div>

    <!-- Back link -->
    <%= link_to "Back",
                root_path,
                class: "mt-4 text-center text-sm font-medium text-indigo-400 underline-offset-4 hover:underline" %>

  </section>
</main>
